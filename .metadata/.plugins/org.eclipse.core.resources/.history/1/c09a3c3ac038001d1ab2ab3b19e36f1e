package com.example.spring01.controller;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;

//@을 통해 컨트롤러 빈으로 등록해줘야 함
@Controller
public class MainController {
	//로깅변수
	private static final Logger logger =LoggerFactory.getLogger(MainController.class);
	
	//url요청 매핑처리
	@RequestMapping("/")
	public String main(Model model) {
		//model은 자료 저장용 객체(서블릿에서 request객체와 유사)
		model.addAttribute("message","홈페이지 방문을 환영합니다.");
		return "main"; //WEB-INF/views/main.jsp로 포워딩(스프링은 기본값이 포워딩이다. Redirect는 별도지정)
	}
	
	@RequestMapping("gugu.do")
	public String gugu(Model model,@RequestParam(defaultValue="2") int dan) {
		//int dan=7;
		String result = "";
		for(int i=1;i<=9;i++) {
			result += dan + "x"+i+"="+dan*i+"<br>";
		}
		model.addAttribute("result",result);
		return "test/gugu"; //views/test/gugu.jsp 로 포워딩
	}
	@RequestMapping("test.do")
	public void test() {
		//리턴타입이 없을 경우 url name(test())와 같은 페이지로 자동포워딩 됨, 즉 views/test.jsp로 자동 포워딩.
		
	}
	@RequestMapping("test/doA")
	public String doA(Model model) {
		//request.setAttribute("message","홈페이지 방문을 환영합니다.");
		//String page="/test/doA.jsp";
		//RequestDispatcher rd = request.getRequestDispatcher(page);
		//rd.forword(request,response);
		
		// 자료저장
		model.addAttribute("message","홈페이지 방문을 환영합니다.");
		//포워딩
		return "test/doA";
	}
	@RequestMapping("test/doB")
	public void doB() {
		logger.info("doB 호출...");
	}
	//model - 전달할 데이터
	//modelandview - 전달할 데이터와 포워딩할 페이지 정보를 함께 포함
	@RequestMapping("test/doC")
	public ModelAndView doC() {
		logger.info("doB 호출...");
	}
}
